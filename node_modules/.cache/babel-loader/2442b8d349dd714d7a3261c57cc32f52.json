{"remainingRequest":"/Users/huangweiji/Desktop/code/git_project/-Dragon-Boat-Festival/node_modules/thread-loader/dist/cjs.js!/Users/huangweiji/Desktop/code/git_project/-Dragon-Boat-Festival/node_modules/babel-loader/lib/index.js!/Users/huangweiji/Desktop/code/git_project/-Dragon-Boat-Festival/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huangweiji/Desktop/code/git_project/-Dragon-Boat-Festival/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangweiji/Desktop/code/git_project/-Dragon-Boat-Festival/src/components/common/Affix/Affix.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangweiji/Desktop/code/git_project/-Dragon-Boat-Festival/src/components/common/Affix/Affix.vue","mtime":1624322764000},{"path":"/Users/huangweiji/Desktop/code/git_project/-Dragon-Boat-Festival/node_modules/cache-loader/dist/cjs.js","mtime":1639105455449},{"path":"/Users/huangweiji/Desktop/code/git_project/-Dragon-Boat-Festival/node_modules/thread-loader/dist/cjs.js","mtime":1639105455402},{"path":"/Users/huangweiji/Desktop/code/git_project/-Dragon-Boat-Festival/node_modules/babel-loader/lib/index.js","mtime":1639105455772},{"path":"/Users/huangweiji/Desktop/code/git_project/-Dragon-Boat-Festival/node_modules/cache-loader/dist/cjs.js","mtime":1639105455449},{"path":"/Users/huangweiji/Desktop/code/git_project/-Dragon-Boat-Festival/node_modules/vue-loader/lib/index.js","mtime":1639105455859}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwovLwovLwovLwovLwovLwovLwovLwoKLyoqCiAqIOWbuumSiQogKi8KZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBvZmZzZXQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICAiZGVmYXVsdCI6IDAKICAgIH0sCiAgICBvbkFmZml4OiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICAiZGVmYXVsdCI6IGZ1bmN0aW9uIF9kZWZhdWx0KCkge30KICAgIH0sCiAgICBib3VuZGFyeTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICJkZWZhdWx0IjogIiIKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhZmZpeGVkOiBmYWxzZSwKICAgICAgc3R5bGVzOiB7fSwKICAgICAgYWZmaXhlZENsaWVudEhlaWdodDogMCwKICAgICAgd3JhcFN0eWxlOiB7fQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFNjcm9sbDogZnVuY3Rpb24gZ2V0U2Nyb2xsKHcsIHRvcCkgewogICAgICB2YXIgcmV0ID0gd1sicGFnZSIuY29uY2F0KHRvcCA/ICJZIiA6ICJYIiwgIk9mZnNldCIpXTsKICAgICAgdmFyIG1ldGhvZCA9ICJzY3JvbGwiLmNvbmNhdCh0b3AgPyAiVG9wIiA6ICJMZWZ0Iik7CgogICAgICBpZiAodHlwZW9mIHJldCAhPT0gIm51bWJlciIpIHsKICAgICAgICB2YXIgZCA9IHcuZG9jdW1lbnQ7IC8vIGllNiw3LDggCgogICAgICAgIHJldCA9IGQuZG9jdW1lbnRFbGVtZW50W21ldGhvZF07CgogICAgICAgIGlmICh0eXBlb2YgcmV0ICE9PSAibnVtYmVyIikgewogICAgICAgICAgcmV0ID0gZC5ib2R5W21ldGhvZF07CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmV0OwogICAgfSwKICAgIGdldE9mZnNldDogZnVuY3Rpb24gZ2V0T2Zmc2V0KGVsZW1lbnQpIHsKICAgICAgdmFyIHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7CiAgICAgIHZhciBjbGllbnRUb3AgPSBlbGVtZW50LmNsaWVudFRvcCB8fCBib2R5LmNsaWVudFRvcCB8fCAwOwogICAgICB2YXIgY2xpZW50TGVmdCA9IGVsZW1lbnQuY2xpZW50TGVmdCB8fCBib2R5LmNsaWVudExlZnQgfHwgMDsgLy8gY29uc3QgY2xpZW50SGVpZ2h0ID0gZWxlbWVudC5jbGllbnRIZWlnaHQgfHwgMDsKCiAgICAgIHZhciBzY3JvbGxUb3AgPSB0aGlzLmdldFNjcm9sbCh3aW5kb3csIHRydWUpOwogICAgICB2YXIgc2Nyb2xsTGVmdCA9IHRoaXMuZ2V0U2Nyb2xsKHdpbmRvdyk7CiAgICAgIHJldHVybiB7CiAgICAgICAgdG9wOiByZWN0LmJvdHRvbSArIHNjcm9sbFRvcCAtIGNsaWVudFRvcCAtIHRoaXMuYWZmaXhlZENsaWVudEhlaWdodCwKICAgICAgICBsZWZ0OiByZWN0LmxlZnQgKyBzY3JvbGxMZWZ0IC0gY2xpZW50TGVmdAogICAgICB9OwogICAgfSwKICAgIGhhbmRsZVNjcm9sbDogZnVuY3Rpb24gaGFuZGxlU2Nyb2xsKCkgewogICAgICB2YXIgc2Nyb2xsVG9wID0gdGhpcy5nZXRTY3JvbGwod2luZG93LCB0cnVlKSArIHRoaXMub2Zmc2V0czsKICAgICAgdmFyIGVsZW1lbnRPZmZzZXQgPSB0aGlzLmdldE9mZnNldCh0aGlzLiRlbCk7CgogICAgICBpZiAoIXRoaXMuYWZmaXhlZCAmJiBzY3JvbGxUb3AgPiBlbGVtZW50T2Zmc2V0LnRvcCkgewogICAgICAgIHRoaXMuYWZmaXhlZCA9IHRydWU7CiAgICAgICAgdGhpcy5zdHlsZXMgPSB7CiAgICAgICAgICB0b3A6ICIiLmNvbmNhdCh0aGlzLm9mZnNldHMsICJweCIpLAogICAgICAgICAgbGVmdDogIiIuY29uY2F0KGVsZW1lbnRPZmZzZXQubGVmdCwgInB4IikKICAgICAgICB9OwogICAgICAgIHRoaXMub25BZmZpeCh0aGlzLmFmZml4ZWQpOwogICAgICB9IC8vIAoKCiAgICAgIGlmICh0aGlzLmJvdW5kYXJ5ICYmIHNjcm9sbFRvcCA+IGVsZW1lbnRPZmZzZXQudG9wKSB7CiAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5ib3VuZGFyeS5zbGljZSgxKSk7CgogICAgICAgIGlmIChlbCkgewogICAgICAgICAgdmFyIGJvdW5kYXJ5T2Zmc2V0ID0gdGhpcy5nZXRPZmZzZXQoZWwpOwoKICAgICAgICAgIGlmIChzY3JvbGxUb3AgKyB0aGlzLm9mZnNldHMgPiBib3VuZGFyeU9mZnNldC50b3ApIHsKICAgICAgICAgICAgdmFyIHRvcCA9IHNjcm9sbFRvcCAtIGJvdW5kYXJ5T2Zmc2V0LnRvcDsKICAgICAgICAgICAgdGhpcy5zdHlsZXMudG9wID0gIi0iLmNvbmNhdCh0b3AsICJweCIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuYWZmaXhlZCAmJiBzY3JvbGxUb3AgPCBlbGVtZW50T2Zmc2V0LnRvcCkgewogICAgICAgIHRoaXMuYWZmaXhlZCA9IGZhbHNlOwogICAgICAgIHRoaXMuc3R5bGVzID0ge307CiAgICAgICAgdGhpcy5vbkFmZml4KHRoaXMuYWZmaXhlZCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFmZml4ZWQgJiYgdGhpcy5ib3VuZGFyeSkgewogICAgICAgIHZhciBfZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmJvdW5kYXJ5LnNsaWNlKDEpKTsKCiAgICAgICAgaWYgKF9lbCkgewogICAgICAgICAgdmFyIF9ib3VuZGFyeU9mZnNldCA9IHRoaXMuZ2V0T2Zmc2V0KF9lbCk7CgogICAgICAgICAgaWYgKHNjcm9sbFRvcCArIHRoaXMub2Zmc2V0cyA8PSBfYm91bmRhcnlPZmZzZXQudG9wKSB7CiAgICAgICAgICAgIHRoaXMuc3R5bGVzLnRvcCA9IDA7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgb2Zmc2V0czogZnVuY3Rpb24gb2Zmc2V0cygpIHsKICAgICAgaWYgKHRoaXMuYm91bmRhcnkpIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0OwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuYWZmaXhlZENsaWVudEhlaWdodCA9IHRoaXMuJGVsLmNoaWxkcmVuWzBdLmNsaWVudEhlaWdodDsKICAgIHRoaXMud3JhcFN0eWxlID0gewogICAgICBoZWlnaHQ6ICIiLmNvbmNhdCh0aGlzLmFmZml4ZWRDbGllbnRIZWlnaHQsICJweCIpCiAgICB9OwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIHRoaXMuaGFuZGxlU2Nyb2xsKTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCB0aGlzLmhhbmRsZVNjcm9sbCk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIHRoaXMuaGFuZGxlU2Nyb2xsKTsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJyZXNpemUiLCB0aGlzLmhhbmRsZVNjcm9sbCk7CiAgfQp9Ow=="},{"version":3,"sources":["Affix.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"affix-placeholder\" :style=\"wrapStyle\">\n    <div :class=\"{ affix: affixed }\" :style=\"styles\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n<script>\n/**\n * 固钉\n */\nexport default {\n  props: {\n    offset: {\n      type: Number,\n      default: 0,\n    },\n    onAffix: {\n      type: Function,\n      default() {},\n    },\n    boundary: {\n      type: String,\n      default: \"\",\n    },\n  },\n  data() {\n    return {\n      affixed: false,\n      styles: {},\n      affixedClientHeight: 0,\n      wrapStyle: {},\n    };\n  },\n  methods: {\n    getScroll(w, top) {\n      let ret = w[`page${top ? \"Y\" : \"X\"}Offset`];\n      const method = `scroll${top ? \"Top\" : \"Left\"}`;\n      if (typeof ret !== \"number\") {\n        const d = w.document;\n        // ie6,7,8 \n        ret = d.documentElement[method];\n        if (typeof ret !== \"number\") {\n          ret = d.body[method];\n        }\n      }\n      return ret;\n    },\n    getOffset(element) {\n      const rect = element.getBoundingClientRect();\n      const body = document.body;\n      const clientTop = element.clientTop || body.clientTop || 0;\n      const clientLeft = element.clientLeft || body.clientLeft || 0;\n      // const clientHeight = element.clientHeight || 0;\n      const scrollTop = this.getScroll(window, true);\n      const scrollLeft = this.getScroll(window);\n      return {\n        top: rect.bottom + scrollTop - clientTop - this.affixedClientHeight,\n        left: rect.left + scrollLeft - clientLeft,\n      };\n    },\n    handleScroll() {\n      const scrollTop = this.getScroll(window, true) + this.offsets; \n      const elementOffset = this.getOffset(this.$el);\n      if (!this.affixed && scrollTop > elementOffset.top) {\n        this.affixed = true;\n        this.styles = {\n          top: `${this.offsets}px`,\n          left: `${elementOffset.left}px`,\n        };\n        this.onAffix(this.affixed);\n      }\n      // \n      if (this.boundary && scrollTop > elementOffset.top) {\n        const el = document.getElementById(this.boundary.slice(1));\n        if (el) {\n          const boundaryOffset = this.getOffset(el);\n          if (scrollTop + this.offsets > boundaryOffset.top) {\n            const top = scrollTop - boundaryOffset.top;\n            this.styles.top = `-${top}px`;\n          }\n        }\n      }\n      if (this.affixed && scrollTop < elementOffset.top) {\n        this.affixed = false;\n        this.styles = {};\n        this.onAffix(this.affixed);\n      }\n      if (this.affixed && this.boundary) {\n        const el = document.getElementById(this.boundary.slice(1));\n        if (el) {\n          const boundaryOffset = this.getOffset(el);\n          if (scrollTop + this.offsets <= boundaryOffset.top) {\n            this.styles.top = 0;\n          }\n        }\n      }\n    },\n  },\n  computed: {\n    offsets() {\n      if (this.boundary) {\n        return 0;\n      }\n      return this.offset;\n    },\n  },\n  mounted() {\n    this.affixedClientHeight = this.$el.children[0].clientHeight;\n    this.wrapStyle = { height: `${this.affixedClientHeight}px` };\n    window.addEventListener(\"scroll\", this.handleScroll);\n    window.addEventListener(\"resize\", this.handleScroll);\n  },\n  beforeDestroy() {\n    window.removeEventListener(\"scroll\", this.handleScroll);\n    window.removeEventListener(\"resize\", this.handleScroll);\n  },\n};\n</script>\n<style scoped>\n.affix {\n  position: fixed;\n  z-index: 999;\n  width: 100vw;\n}\n</style>"],"sourceRoot":"src/components/common/Affix"}]}